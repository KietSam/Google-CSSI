/*!CK:1960653418!*//*1435050694,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["V8D8B"]); }

__d("GroupsMemberSuggestion",["Arbiter","AsyncRequest","CSS","DOM","Event","Parent","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();function n(o,p,q,r,s){if(o&&p)this.init(o,p,q,r,s);}Object.assign(n.prototype,{init:function(o,p,q,r,s){this._container=o;this._groupID=p;this._uids=q;this._scores=r;this._positions=s;var t=j.scry(document.body,'.addLink');for(var u=0;u<t.length;u++)k.listen(t[u],'click',this.handleAddMember.bind(this));k.listen(o,'click',function(v){var w=v.getTarget(),x=l.byClass(w,'userSuggestionLi');l.byClass(w,'declineButton')&&this._swap(x);}.bind(this));g.subscribe('GroupsMemberSuggestion/remove',this.handleOnRemove.bind(this));},handleAddMember:function(o){var p=o.getTarget(),q=l.byClass(p,'userSuggestionLi'),r=this._uids[q.id],s={};s.source='suggestion';s.group_id=this._groupID;s.members=[r];s.position=this._positions[r];s.suggestion_alg_score=this._scores[r];new h('/ajax/groups/members/add_post.php').setData(s).setHandler(function(t){this.onAddMember(t,q);}.bind(this)).setErrorHandler(function(t){this.onAddMemberError(t,q);}.bind(this)).send();},onAddMemberError:function(o,p){var q=m._("An error has occured. Please try adding this member later");j.setContent(p,q);},onAddMember:function(o,p){var q=o.getPayload();if(q&&q.error_occured){j.setContent(p,q.error_html);}else this._expand(p);},handleOnRemove:function(o,p){var q=j.scry(this._container,'#suggestion_'+p)[0];q&&this._swap(q);},_swap:function(o){j.remove(o);if(!i.hasClass(o,'hidden_elem')){var p=j.scry(this._container,'.userSuggestionLi.hidden_elem')[0];if(p)i.show(p);}},_expand:function(o){j.remove(o);var p=j.scry(this._container,'.userSuggestionLi.hidden_elem');if(p.length>0)for(var q=0;q<p.length;q++)i.show(p[q]);}});e.exports=n;},null);
__d("GroupsGroupSuggestion",["DOM","Arbiter"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(j,k){this._container=j;this._num_suggestions=k;h.subscribe('GroupsGroupSuggestion/remove',this.onRemoveSuggestion.bind(this));}Object.assign(i.prototype,{onRemoveSuggestion:function(){this._num_suggestions--;if(this._num_suggestions<=0)g.remove(this._container);}});e.exports=i;},null);