/*!CK:1861146725!*//*1437417891,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["v5h\/u"]); }

__d("VideoWatchAndScrollController",["DOM","DOMDimensions","EventListener","React","SubscriptionsHandler","VideoAutoplayControllerX","VideoFrameBuffer","VideoPlayerLoggerEvents","VideoPlayerReason","VideoWatchAndScrollContainer.react","cx","destroyOnUnload","getViewportDimensions","invariant"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){b.__markCompiled&&b.__markCompiled();var u=169,v=300,w=null;function x(){"use strict";this.$VideoWatchAndScrollController0=new k();this.$VideoWatchAndScrollController1=null;this.$VideoWatchAndScrollController2=null;this.$VideoWatchAndScrollController3=false;var y=s.withoutScrollbars();this.$VideoWatchAndScrollController4={left:10,top:y.height-u-10};r(function(){if(this.$VideoWatchAndScrollController3)this.$VideoWatchAndScrollController5();if(this.$VideoWatchAndScrollController0)this.$VideoWatchAndScrollController0.release();if(this===w)w=null;}.bind(this));}x.registerVideoController=function(y){"use strict";if(w==null)w=new x();w.$VideoWatchAndScrollController0.addSubscriptions(y.addListener('enterWatchAndScroll',function(){return w.$VideoWatchAndScrollController6(y);}),y.addListener('exitWatchAndScroll',function(){return w.$VideoWatchAndScrollController7(y);}));var z=['beginPlayback','changeVolume','muteVideo','qualityChange','toggleFullscreen','unmuteVideo'];z.forEach(function(event){return w.$VideoWatchAndScrollController0.addSubscriptions(y.addListener(event,function(){return w.$VideoWatchAndScrollController8(y);}));});};x.prototype.$VideoWatchAndScrollController8=function(y){"use strict";if(this.$VideoWatchAndScrollController3&&this.$VideoWatchAndScrollController9!==y)this.$VideoWatchAndScrollController9.pause(o.USER);};x.prototype.$VideoWatchAndScrollController6=function(y){"use strict";if(this.$VideoWatchAndScrollController3&&this.$VideoWatchAndScrollController9!==y){this.$VideoWatchAndScrollControllera=y;this.$VideoWatchAndScrollController5();return;}t(!this.$VideoWatchAndScrollController3);this.$VideoWatchAndScrollController9=y;this.$VideoWatchAndScrollControllerb=this.$VideoWatchAndScrollController9.getRootNode();this.$VideoWatchAndScrollControllerc={videoRootNode:this.$VideoWatchAndScrollControllerb.parentNode,dimensions:h.getElementDimensions(this.$VideoWatchAndScrollControllerb)};this.$VideoWatchAndScrollControllerd=this.$VideoWatchAndScrollControllere(this.$VideoWatchAndScrollControllerc.dimensions,this.$VideoWatchAndScrollController9.getVideoNode());g.insertAfter(this.$VideoWatchAndScrollControllerb,this.$VideoWatchAndScrollControllerd);this.$VideoWatchAndScrollControllerf=i.listen(this.$VideoWatchAndScrollControllerb.parentNode,'click',function(){this.$VideoWatchAndScrollController5();}.bind(this));var z=this.$VideoWatchAndScrollController9.isState('playing');g.remove(this.$VideoWatchAndScrollControllerb);this.$VideoWatchAndScrollController9.setDimensions(v,u);this.$VideoWatchAndScrollController3=true;this.$VideoWatchAndScrollControllerg();this.$VideoWatchAndScrollControllerh=this.$VideoWatchAndScrollControlleri(this.$VideoWatchAndScrollController9);if(z)this.$VideoWatchAndScrollController9.play(o.USER);this.$VideoWatchAndScrollController9.logEvent(n.PLAYER_FORMAT_CHANGED,{player_format:'watch_scroll'});};x.prototype.$VideoWatchAndScrollControlleri=function(y){"use strict";if(y)return y.addListener('stateChange',function(){if(y.isState('playing')){l.setShouldAutoplay(false);}else l.setShouldAutoplay(true);});};x.prototype.$VideoWatchAndScrollControllere=function(y,z){"use strict";var aa=g.create('canvas',{className:"_308d"});if(aa.getContext&&aa.getContext('2d')){aa.height=y.height;aa.width=y.width;var ba=new m(aa,z);ba.updateFrameBuffer();}return aa;};x.prototype.$VideoWatchAndScrollController7=function(y){"use strict";t(this.$VideoWatchAndScrollController3);t(y===this.$VideoWatchAndScrollController9);this.$VideoWatchAndScrollController9.pause(o.USER);j.unmountComponentAtNode(this.$VideoWatchAndScrollControllerj());g.remove(this.$VideoWatchAndScrollControllerd);this.$VideoWatchAndScrollControllerf.remove();this.$VideoWatchAndScrollControllerh.remove();g.prependContent(this.$VideoWatchAndScrollControllerc.videoRootNode,this.$VideoWatchAndScrollControllerb);this.$VideoWatchAndScrollController9.setDimensions(this.$VideoWatchAndScrollControllerc.dimensions.width,this.$VideoWatchAndScrollControllerc.dimensions.height);this.$VideoWatchAndScrollController9.logEvent(n.PLAYER_FORMAT_CHANGED,{player_format:'inline'});this.$VideoWatchAndScrollControllerc=null;this.$VideoWatchAndScrollController9=null;this.$VideoWatchAndScrollController3=false;l.setShouldAutoplay(true);this.$VideoWatchAndScrollController1=null;if(this.$VideoWatchAndScrollControllera){this.$VideoWatchAndScrollController6(this.$VideoWatchAndScrollControllera);this.$VideoWatchAndScrollControllera=null;}};x.prototype.$VideoWatchAndScrollControllerg=function(){"use strict";j.render(j.createElement(p,{height:u,onDrop:this.$VideoWatchAndScrollControllerk.bind(this),onGrab:this.$VideoWatchAndScrollControllerl.bind(this),onInitialPositionUpdate:this.$VideoWatchAndScrollControllerm.bind(this),initialPosition:this.$VideoWatchAndScrollController4,videoElement:this.$VideoWatchAndScrollControllerb,width:v}),this.$VideoWatchAndScrollControllerj());};x.prototype.$VideoWatchAndScrollController5=function(){"use strict";if(this.$VideoWatchAndScrollController9)this.$VideoWatchAndScrollController9.emit('exitWatchAndScroll');};x.prototype.$VideoWatchAndScrollControllerl=function(){"use strict";this.$VideoWatchAndScrollControllern=this.$VideoWatchAndScrollController9.isState('playing');this.$VideoWatchAndScrollController9.pause(o.USER);};x.prototype.$VideoWatchAndScrollControllerk=function(){"use strict";if(this.$VideoWatchAndScrollControllern)this.$VideoWatchAndScrollController9.play(o.USER);this.$VideoWatchAndScrollControllern=null;};x.prototype.$VideoWatchAndScrollControllerm=function(y){"use strict";this.$VideoWatchAndScrollController4=y;};x.prototype.$VideoWatchAndScrollControllero=function(){"use strict";var y=g.create('div');g.appendContent(document.body,y);return y;};x.prototype.$VideoWatchAndScrollControllerj=function(){"use strict";if(!this.$VideoWatchAndScrollController1)this.$VideoWatchAndScrollController1=this.$VideoWatchAndScrollControllero();return this.$VideoWatchAndScrollController1;};e.exports=x;},null);